---
title: '【保姆级教程】从螺丝刀到 Root Shell：小白也能看懂的 IoT 硬件层渗透指南'
date: '2025-12-29'
tags: ['IoT Security']
draft: false
summary: '别再只看理论了，本文把硬件测试拆解为手把手的操作步骤。带上你的万用表，我们去拆开设备的“脑壳”。'
---

你可能看过上一篇关于硬件层的理论介绍，觉得“不明觉厉”。但真到了手里拿着一个路由器或摄像头时，你可能会懵：**“我第一步该干嘛？这根线接哪里？万用表怎么拧？”**

别慌。本篇博客将把书中的理论转化为**可执行的操作手册**。我们将从最基础的工具准备开始，手把手带你完成一次硬件层的渗透测试。

**⚠️ 高压危险警告**：作为新手，请只拆解使用 **USB 5V** 或 **12V 适配器** 供电的小型设备。**绝对不要**拆解直接连接 220V/110V 交流电的智能插座或灯泡，除非你持有电工证，否则有**生命危险**！

---

## 🛠️ 第一步：组建你的“军火库” (准备工作)

在动手之前，你需要花几十块钱买点基础工具。不需要昂贵的实验室设备，淘宝/京东就能搞定。

1.  **螺丝刀套装**：推荐米家或南旗的精修套装，涵盖十字、一字、六角（Torx）等异形螺丝。
2.  **数字万用表**：最便宜的（约 30 元）即可，必须有**蜂鸣档（通断测试）**。
3.  **USB 转 TTL 模块**：这是核心！推荐芯片型号 **CP2102** 或 **FT232RL**。这是你电脑和设备对话的翻译器。
4.  **杜邦线**：公对公、公对母、母对母各买一排。
5.  **CH341A 编程器**（进阶可选）：约 15 元，用于直接夹住芯片读取固件。

---

## 🔍 第二步：不拆机的外部攻击 (Peripheral Attacks)

在拧下螺丝之前，先看看外面有什么漏洞。

### 1. USB 接口利用

很多设备（如网关、机顶盒）都有 USB 口。

- **动作**：插上一个键盘。
- **测试**：设备启动时，疯狂按 `Enter`、`Esc`、`F12` 或 `Del` 键。
- **目的**：看看能不能进 BIOS 设置，或者干扰启动流程进入命令行模式。

### 2. Kiosk 逃逸 (针对带屏幕设备)

如果你的目标是取款机样机、智能家居中控屏等带屏幕但界面受限的设备。

- **动作**：插入 USB 键盘。
- **连招**：
  - `Alt + F4`：尝试关闭当前全屏应用。
  - `Ctrl + Alt + Del`：尝试调出任务管理器。
  - `Windows 键` 或 `Windows + D`：尝试回到桌面。
  - `Shift + F10`：在某些安装界面尝试调出 CMD。
- **预期**：一旦看到 Windows 桌面或 CMD 窗口，由于内部网络通常不设防，你基本就拿下了。

---

## 🔩 第三步：拆解与防篡改 (Teardown)

现在，我们要打开它的外壳。

### 1. 寻找隐藏的螺丝

厂商很鸡贼，螺丝通常藏在：

- **橡胶脚垫下面**：用指甲或平头螺丝刀撬开底部的橡胶垫。
- **贴纸下面**：用手指摸一下背面的标签纸，如果有凹陷，螺丝就在下面。

### 2. 应对防拆机制

- **易碎贴**：看到“Warranty Void If Removed”贴纸？黑客的第一反应通常是撕了它。
- **卡扣**：如果没有螺丝但打不开，通常是塑料卡扣。用**吉他拨片**或废弃的信用卡沿着缝隙划一圈。
- **环氧树脂（黑胶）**：如果你看到芯片被一坨黑色的硬胶盖住了，对于新手来说，这通常意味着游戏结束（Game Over），换个容易的目标吧。

---

## ⚡ 第四步：寻找调试接口 (UART) —— **核心实战**

这是本章的重头戏。我们要找到电路板上的 **UART (串口)**，这是厂家留下的后门，往往能直接给我们一个 Root Shell。

### 1. 怎么在板子上找到它？

拿起电路板，寻找以下特征：

- **3 到 4 个并排的针脚**，或者并排的**空焊盘**（孔）。
- 旁边可能有丝印写着 `TX`, `RX`, `GND`, `VCC`（如果运气好的话）。
- 如果没有字，通常它们聚在一起，且线路走向 CPU。

### 2. 万用表大法：盲测引脚定义

假设你找到了 4 个孔，但不知道谁是谁。请拿出万用表：

- **找 GND (地线)**：
  1.  万用表调到**蜂鸣档**（两个表笔碰在一起会响）。
  2.  黑表笔接触 USB 接口的金属外壳（这绝对是地）。
  3.  红表笔轮流戳那 4 个孔。
  4.  **听到“滴”的一声长响**，那个孔就是 **GND**。

- **找 VCC (电源)**：
  1.  给设备通电。
  2.  万用表调到 **直流电压 20V 档**。
  3.  黑表笔接刚才找到的 GND。
  4.  红表笔测剩下的孔。
  5.  电压显示 **3.3V** 或 **5V** 且稳定的，通常是 **VCC**。**注意：千万不要把 USB 转 TTL 连到这个针脚上，否则会烧坏你的电脑 USB 口！**

- **找 TX (发送) 和 RX (接收)**：
  1.  剩下的两个通常就是 TX 和 RX。
  2.  TX 在设备启动瞬间，电压通常会有跳变（数据传输）。
  3.  如果分不清，没关系，盲接试一下，不行就交换。

### 3. 连接电脑

拿出你的 **USB 转 TTL 模块**：

- 模块 **GND** <--> 设备 **GND**
- 模块 **RX** <--> 设备 **TX** (听它的嘴说)
- 模块 **TX** <--> 设备 **RX** (对它的耳朵说)
- **VCC 不要接！** (设备用自带电源供电)

### 4. 软件连接

1.  电脑上安装驱动（CP210x 或 FTDI）。
2.  Windows 打开设备管理器，查看端口号（如 `COM3`）。
3.  打开 **PuTTY** 或 **MobaXterm**。
    - Connection type: **Serial**
    - Serial line: `COM3`
    - Speed (Baud): **115200** (最常见的波特率，如果是乱码，试试 57600 或 9600)。
4.  点击 Open，然后**给设备通电**。

### 5. 见证奇迹

如果一切顺利，你会看到屏幕上疯狂滚动 Linux 启动代码。

- **Root Shell**：如果启动完直接显示 `#`，恭喜你，你已经拿下了这台设备。
- **登录框**：如果显示 `login:`，试试 `root/root`, `admin/admin`, `root/12345`。

---

## 🖥️ 第五步：U-Boot 劫持 (Boot Environment)

如果你在串口里看到了登录框但猜不出密码，别急，重启设备。

**动作**：
在刚通电、日志开始滚动的前几秒，疯狂按 `Enter` 键或者 `Space` 键。

**预期**：
如果看到类似 `uboot#` 或 `=>` 的提示符，说明你打断了启动过程，进入了 **Bootloader** 模式。这就像进入了电脑的 BIOS。

**必杀技 (修改启动参数)**：
在 U-Boot 命令行里输入：

```bash
printenv bootargs  # 查看当前启动参数
# 下面这行是举例，具体要看上一条命令的输出格式
setenv bootargs ${bootargs} init=/bin/sh
boot
```

**原理**：告诉 Linux 内核，启动后不要运行正常的初始化程序（这会要求密码），而是直接给我一个 Shell (`/bin/sh`)。
**结果**：设备重启后，你将直接获得无密码的 Root 权限。

---

## 💾 第六步：固件提取 (进阶奖励)

如果你连串口都找不到，或者被封死了。还有最后一招：**直接读记忆**。

找到板子上那个有 8 个脚的小芯片（通常是 Winbond, MXIC 等品牌），那是 **SPI Flash**，里面装着系统固件。

**操作**：

1.  断电。
2.  把 **CH341A 编程器** 的夹子夹在芯片上（注意 1 号脚对准）。
3.  在电脑上用配套软件点“读取”。
4.  你将得到一个 `firmware.bin` 文件。
5.  在 Linux 上用 `binwalk -e firmware.bin` 解包，寻找 `/etc/shadow` 或硬编码的密钥。

---

## 总结：你的第一个 Flag

这一套流程下来，对于市面上 50% 以上的廉价 IoT 设备（路由器、摄像头、智能插座），你基本都能拿到 Shell。

**小白操作清单：**

1.  **看**：USB 口、Kiosk 逃逸。
2.  **拆**：螺丝、卡扣、指甲。
3.  **测**：万用表找 GND，找 3.3V。
4.  **连**：USB 转 TTL，GND 接 GND，RX 接 TX。
5.  **劫**：U-Boot 改 `init=/bin/sh`。

现在，去把你吃灰的旧路由器拿出来，试试能不能看到它的“灵魂”（Boot Log）吧！

```python
# 安全提示
def safety_check():
    target = input("你想拆解什么设备？")
    if "220V" in target or "强电" in target:
        print("❌ 禁止！这会电死人。")
    elif "邻居家的" in target:
        print("❌ 禁止！这是违法行为。")
    else:
        print("✅ 允许。请开始你的黑客之旅。")

safety_check()
```
